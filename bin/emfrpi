#!/usr/bin/env ruby
$LOAD_PATH.unshift File.expand_path('../../lib', __FILE__)
$LOAD_PATH.unshift File.dirname(__FILE__) + "/../../parser_combinator/lib"
require 'emfrp'
require 'emfrp/interpreter/interpreter'
require 'readline'

current_dir = Dir.pwd + "/"
stdlib_dir = File.dirname(__FILE__) + "/../mfrp_include/"

inter = Emfrp::Interpreter.new([current_dir, stdlib_dir], STDOUT, ARGV[0] || "Std")
while true
  input = Readline.readline("mfrpi:#{inter.read_num}> ", true)
  if input == nil
    inter.end_of_input()
    break
  else
    inter.process_command(input)
  end
end
